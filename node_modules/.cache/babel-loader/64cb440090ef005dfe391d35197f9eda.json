{"ast":null,"code":"import React from'react';import Cta from'../components/Cta';import Footer from'../components/Footer';import Hero from'../components/Hero';import{useLocation}from'react-router-dom';import Cookies from'universal-cookie';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var decodeJWT=function decodeJWT(token){var base64Url=token.split('.')[1];var base64=base64Url.replace(/-/g,'+').replace(/_/g,'/');var jsonPayload=decodeURIComponent(atob(base64).split('').map(function(char){return'%'+('00'+char.charCodeAt(0).toString(16)).slice(-2);}).join(''));return JSON.parse(jsonPayload);};var Home=function Home(){// Initialize cookies \nvar cookies=new Cookies();var location=useLocation();// Try to get the id_token from the url params\nvar params=location.hash;if(params){var indexOfIdToken=params.indexOf('id_token=');var indexOfNextAmpersand=params.indexOf('&',indexOfIdToken);var id_token=params.substring(indexOfIdToken+9,indexOfNextAmpersand);if(id_token){// Set the expiration duration for the cookie (e.g., 1 day)\nvar expirationDate=new Date();expirationDate.setDate(expirationDate.getDate()+1);cookies.set('id_token',id_token,{path:'/',expires:expirationDate});// cookies.set('id_token', id_token, { path: '/' });\nvar decodedToken=decodeJWT(id_token);var email=decodedToken.email;var new_email=email.replace(/@/g,'').replace(/\\./g,'');cookies.set('email',new_email,{path:'/'});}}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Hero,{}),/*#__PURE__*/_jsx(Cta,{}),/*#__PURE__*/_jsx(Footer,{})]});};export default Home;","map":{"version":3,"sources":["/Users/xiuhuiwang/Documents/USF/CS686_CloudComputing/final/mld/src/pages/Home.js"],"names":["React","Cta","Footer","Hero","useLocation","Cookies","decodeJWT","token","base64Url","split","base64","replace","jsonPayload","decodeURIComponent","atob","map","char","charCodeAt","toString","slice","join","JSON","parse","Home","cookies","location","params","hash","indexOfIdToken","indexOf","indexOfNextAmpersand","id_token","substring","expirationDate","Date","setDate","getDate","set","path","expires","decodedToken","email","new_email"],"mappings":"AAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,GAAP,KAAgB,mBAAhB,CACA,MAAOC,CAAAA,MAAP,KAAmB,sBAAnB,CACA,MAAOC,CAAAA,IAAP,KAAiB,oBAAjB,CAEA,OAASC,WAAT,KAA4B,kBAA5B,CACA,MAAOC,CAAAA,OAAP,KAAoB,kBAApB,C,6IAEA,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,CAACC,KAAD,CAAW,CACzB,GAAMC,CAAAA,SAAS,CAAGD,KAAK,CAACE,KAAN,CAAY,GAAZ,EAAiB,CAAjB,CAAlB,CACA,GAAMC,CAAAA,MAAM,CAAGF,SAAS,CAACG,OAAV,CAAkB,IAAlB,CAAwB,GAAxB,EAA6BA,OAA7B,CAAqC,IAArC,CAA2C,GAA3C,CAAf,CACA,GAAMC,CAAAA,WAAW,CAAGC,kBAAkB,CAClCC,IAAI,CAACJ,MAAD,CAAJ,CAAaD,KAAb,CAAmB,EAAnB,EAAuBM,GAAvB,CAA2B,SAACC,IAAD,QAAU,IAAM,CAAC,KAAOA,IAAI,CAACC,UAAL,CAAgB,CAAhB,EAAmBC,QAAnB,CAA4B,EAA5B,CAAR,EAAyCC,KAAzC,CAA+C,CAAC,CAAhD,CAAhB,EAA3B,EAA+FC,IAA/F,CAAoG,EAApG,CADkC,CAAtC,CAGA,MAAOC,CAAAA,IAAI,CAACC,KAAL,CAAWV,WAAX,CAAP,CACH,CAPD,CASA,GAAMW,CAAAA,IAAI,CAAG,QAAPA,CAAAA,IAAO,EAAM,CACf;AACA,GAAMC,CAAAA,OAAO,CAAG,GAAInB,CAAAA,OAAJ,EAAhB,CAEA,GAAMoB,CAAAA,QAAQ,CAAGrB,WAAW,EAA5B,CACA;AACA,GAAMsB,CAAAA,MAAM,CAAGD,QAAQ,CAACE,IAAxB,CACA,GAAID,MAAJ,CAAY,CACR,GAAME,CAAAA,cAAc,CAAGF,MAAM,CAACG,OAAP,CAAe,WAAf,CAAvB,CACA,GAAMC,CAAAA,oBAAoB,CAAGJ,MAAM,CAACG,OAAP,CAAe,GAAf,CAAoBD,cAApB,CAA7B,CACA,GAAMG,CAAAA,QAAQ,CAAGL,MAAM,CAACM,SAAP,CAAiBJ,cAAc,CAAG,CAAlC,CAAqCE,oBAArC,CAAjB,CAEA,GAAIC,QAAJ,CAAc,CACN;AACJ,GAAME,CAAAA,cAAc,CAAG,GAAIC,CAAAA,IAAJ,EAAvB,CACAD,cAAc,CAACE,OAAf,CAAuBF,cAAc,CAACG,OAAf,GAA2B,CAAlD,EACAZ,OAAO,CAACa,GAAR,CAAY,UAAZ,CAAwBN,QAAxB,CAAkC,CAAEO,IAAI,CAAE,GAAR,CAAcC,OAAO,CAAEN,cAAvB,CAAlC,EACA;AACA,GAAMO,CAAAA,YAAY,CAAGlC,SAAS,CAACyB,QAAD,CAA9B,CACA,GAAMU,CAAAA,KAAK,CAAGD,YAAY,CAACC,KAA3B,CACA,GAAMC,CAAAA,SAAS,CAAGD,KAAK,CAAC9B,OAAN,CAAc,IAAd,CAAoB,EAApB,EAAwBA,OAAxB,CAAgC,KAAhC,CAAuC,EAAvC,CAAlB,CACAa,OAAO,CAACa,GAAR,CAAY,OAAZ,CAAqBK,SAArB,CAAgC,CAAEJ,IAAI,CAAE,GAAR,CAAhC,EACH,CACJ,CAGD,mBACI,wCACI,KAAC,IAAD,IADJ,cAEI,KAAC,GAAD,IAFJ,cAGI,KAAC,MAAD,IAHJ,GADJ,CAQH,CAlCD,CAoCA,cAAef,CAAAA,IAAf","sourcesContent":["import React from 'react';\nimport Cta from '../components/Cta';\nimport Footer from '../components/Footer';\nimport Hero from '../components/Hero';\n\nimport { useLocation } from 'react-router-dom';\nimport Cookies from 'universal-cookie';\n\nconst decodeJWT = (token) => { \n    const base64Url = token.split('.')[1]; \n    const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/'); \n    const jsonPayload = decodeURIComponent( \n        atob(base64).split('').map((char) => '%' + ('00' + char.charCodeAt(0).toString(16)).slice(-2)).join('') \n        ); \n    return JSON.parse(jsonPayload); \n};\n\nconst Home = () => {\n    // Initialize cookies \n    const cookies = new Cookies();\n\n    const location = useLocation();\n    // Try to get the id_token from the url params\n    const params = location.hash;\n    if (params) {\n        const indexOfIdToken = params.indexOf('id_token=');\n        const indexOfNextAmpersand = params.indexOf('&', indexOfIdToken);\n        const id_token = params.substring(indexOfIdToken + 9, indexOfNextAmpersand);\n\n        if (id_token) {\n                // Set the expiration duration for the cookie (e.g., 1 day)\n            const expirationDate = new Date();\n            expirationDate.setDate(expirationDate.getDate() + 1);\n            cookies.set('id_token', id_token, { path: '/' , expires: expirationDate });\n            // cookies.set('id_token', id_token, { path: '/' });\n            const decodedToken = decodeJWT(id_token);\n            const email = decodedToken.email;\n            const new_email = email.replace(/@/g, '').replace(/\\./g, '');\n            cookies.set('email', new_email, { path: '/' });\n        }\n    }\n    \n\n    return (\n        <>\n            <Hero />\n            <Cta/>\n            <Footer />\n        </>\n\n    )\n}\n\nexport default Home;\n\n"]},"metadata":{},"sourceType":"module"}